{"version":3,"names":[],"mappings":"","sources":["grammar/RM_PGSQL.toObject.semantics.js"],"sourcesContent":["const defaultType = 'text',\n      defaultPrimaryKeyType = 'bigserial';\n\n\nexport default {\n  ListOf_some (element, separator, rest) {\n    return [element.toObject()].concat(rest.toObject());\n  },\n\n  IContained (open, element, close) {\n    return element.toObject();\n  },\n\n  Model (name, commonAttributes, schemas) {\n    return join({name, commonAttributes: commonAttributes.toObject()[0] || [], schemas});\n  },\n\n  Schema (name, commonAttributes, tables) {\n    return join({name, commonAttributes: commonAttributes.toObject()[0] || [], tables});\n  },\n\n  Table (name, attributes, dependencies) {\n    return join({name, attributes: attributes.toObject()[0], dependencies});\n  },\n\n  Attribute (primaryKey, name, optional, type) {\n    primaryKey = primaryKey.toObject()[0] === '!';\n    type = type.toObject()[0] || (primaryKey ? defaultPrimaryKeyType : defaultType);\n    return join({name, primaryKey, optional: optional.toObject()[0] === '?', type});\n  },\n\n  Type (type) {\n    return type.toObject();\n  },\n\n  List (values) {\n    return join({type: 'List', values});\n  },\n\n  Set (values) {\n    return join({type: 'Set', values});\n  },\n\n  Numeric (numeric, parameters) {\n    return parameters.toObject()[0] || {type: 'Numeric'};\n  },\n\n  NumericParameters (precision, optionalScale) {\n    return join({type: 'Numeric', precision, scale: optionalScale.toObject()[0]});\n  },\n\n  OptionalScale (comma,  scale) {\n    return scale;\n  },\n\n  number (digits) {\n    return parseInt(digits.toObject().join(''), 10);\n  },\n\n  Dependency (preArity, glyph, postArity, reference) {\n    return join({\n      preArity: $ => $(preArity)[0] || 1,\n      postArity: $ => $(postArity)[0] || 1,\n      reference\n    });\n  },\n\n  SchemaTableName (schema, dot, table) {\n    return join({schema, table});\n  },\n\n  TableName (table) {\n    return join({table});\n  },\n\n  name (first_character, additional_characters) {\n    return this.interval.contents;\n  }\n};\n\nfunction join(obj) {\n  for (let key in obj) {\n    const value = obj[key];\n    if (value === undefined) continue;\n    else if (typeof value === 'function') obj[key] = value(o => o.toObject());\n    else if (value.toObject) obj[key] = value.toObject();\n  }\n  return obj;\n}"],"file":"grammar/RM_PGSQL.toObject.semantics.js","sourceRoot":"/source/"}